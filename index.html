<!---By doevix on GitHub--->
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Phyzzy</title>
        <meta charset="UTF-8">
        <link href="css/style.css" rel="stylesheet">
    </head>
    <body>
        <!-- <h2>Phyzzy</h2>
        <input id="userPause" type="button" value="pause">
        <input id="userConstruct" type="button" value="construct">
        <input id="userDelete" type="button" value="delete">
        <input id="userClear" type="button" value="clear"><br> -->
        <!-- <canvas id="viewport" height="480" width="720"></canvas> -->
        <!-- <script src="./js/phyzzy/Phyzzy.js"></script>
        <script src="./js/phyzzy/PhyzzyBuilders.js"></script>
        <script src="./js/Constructor.js"></script> -->
        <script src="./js/phyzzy/v2d.js"></script>
        <script src="./js/phyzzy/model_driver.js"></script>
        <script src="./js/user_action.js"></script>
        <script src="./js/player.js"></script>
        <script>
            // Return a random value within range.
            const rand = (min = 0, max = 1) => min + (max - min) * Math.random();
            // Return a 1 or -1 for multiplying.
            const rSign = () => Math.random() > 0.5 ? 1 : -1;

            // Define environment for the model.
            const env = new Environment(new v2d(0, 9.81), 0,
                0, 0, canvas.width / Model.getScale(), canvas.height / Model.getScale());

            // Generate random masses.
            const maxCount = 1;
            for (let i = 0; i < maxCount; i++) {
                const p = { x: rand(0, env.s_bounds.w), y: rand(0, env.s_bounds.h / 2) };
                const v = { x: rand(-5, 5), y: rand(-5, 5) };
                const mr = rand(0.1, 0.1);
                const m = new Mass(p, mr, mr * 10);
                // m.set_v(new v2d(v.x, v.y), Model.getDelta());
                m.refl = rand(0.5, 0.8);
                m.c_group = 1;
                Model.addMass(m);
            }

            const randPos = (rad, b) => ({ x: rand(rad, b.w - rad), y: rand(rad, b.h - rad) });
            // Triangle with randomly placed vertices.
            let m1 = new Mass(randPos(0.5, env.s_bounds), 0.1, 0.2, 0.05);
            let m2 = new Mass(randPos(0.5, env.s_bounds), 0.1, 0.2, 0.05);
            let m3 = new Mass(randPos(0.5, env.s_bounds), 0.1, 0.2, 0.05);
            let s1 = new Spring(m1, m2, 1, 100, 10) //, 100, 10);
            let s2 = new Spring(m2, m3, 1, 100, 10) //, 100, 10);
            let s3 = new Spring(m3, m1, 1, 100, 10) //, 100, 10);
            m1.isFixed = true;
            m1.c_group = 1;
            m2.c_group = 1;
            m3.c_group = 1;
            s1.c_group = 1;
            s2.c_group = 1;
            s3.c_group = 1;
            Model.addMass(m1);
            Model.addMass(m2);
            Model.addMass(m3);
            Model.addSpring(s1);
            Model.addSpring(s2);
            Model.addSpring(s3);
            
            // Single line.
            // let m4 = new Mass(randPos(0.5, env.s_bounds), 0.1, 0.2);
            // let m5 = new Mass(randPos(0.5, env.s_bounds), 0.1, 0.2);
            // let s4 = new Spring(m4, m5, 0.5);
            // m4.c_group = 1;
            // m5.c_group = 1;
            // s4.c_group = 1;
            // Model.addMass(m4);
            // Model.addMass(m5);
            // Model.addSpring(s4);

            Model.setStepsPerFrame(5);
            frame();
        </script>
    </body>
</html>
